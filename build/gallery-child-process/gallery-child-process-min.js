YUI.add("gallery-child-process",function(a){(function(e){var c=require("child_process").spawn,b,d;d=function(f){d.superclass.constructor.call(this,f);};d.ATTRS={args:{value:[],writeOnce:"initOnly"},command:{writeOnce:"initOnly"},options:{value:{},writeOnce:"initOnly"},pid:{readOnly:true},ready:{readOnly:true,value:false},stderrEncoding:{writeOnce:"initOnly"},stdoutEncoding:{writeOnce:"initOnly"}};d.NAME="ChildProcess";e.extend(d,e.Base,{initializer:function(){this.publish("drain",{defaultFn:function(){this._set("ready",true);}});this.publish("error");this.publish("exit",{defaultFn:function(){this.destroy();},fireOnce:true});this.publish("stderr");this.publish("stdout");var l=c(this.get("command"),this.get("args"),this.get("options")),j=this,i=l.stderr,h=this.get("stderrEncoing"),k=l.stdin,f=l.stdout,g=this.get("stdoutEncoding");if(h){i.setEncoding(h);}i.on("data",function(m){j.fire("stderr",{data:m});});i.on("error",function(m){j.fire("error",{stderr:m});});k.on("drain",function(){j.fire("drain");});k.on("error",function(m){j.fire("error",{stdin:m});});if(g){f.setEncoding(g);}f.on("data",function(m){j.fire("stdout",{data:m});});f.on("error",function(m){j.fire("error",{stdout:m});});l.on("exit",function(m,n){j.fire("exit",{code:m,signal:n});});this._childProcess=l;this._stderr=i;this._stdin=k;this._stdout=f;this._set("pid",l.pid);this._set("ready",true);},kill:function(f){var g=this._childProcess;if(g){g.kill(f||"SIGTERM");}return this;},write:function(h,g){if(this.get("ready")){b.call(this,h,g);}else{var f=this.on("readyChange",function(i){if(i.newVal){this.write(h,g);f.detach();}},this);}return this;}});b=function(g,f){var h=this._stdin;if(!(h&&h.writable&&h.write(g,f))){this._set("ready",false);}};e.ChildProcess=d;}(a));},"@VERSION@",{requires:["base"],skinnable:false});