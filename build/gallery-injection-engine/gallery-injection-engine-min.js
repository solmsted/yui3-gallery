YUI.add("gallery-injection-engine",function(h){var d,b,e,a=h.config.doc.documentElement,c="script",f=/^(http[s]?:\/\/|\/\/[\w\d]+)/;function g(){g.superclass.constructor.apply(this,arguments);}h.mix(g,{NAME:"injection",ATTRS:{bootstrap:{readOnly:true},css:{getter:"_buildCSS"},js:{getter:"_buildJS"},dir:{value:a.dir||"ltr"},lang:{value:a.lang||"en"},container:{setter:function(i){return h.one(i);}},dynamicAttrs:{value:[]},dynamicEvents:{value:[]}}});h.extend(g,h.Base,{initializer:function(k,j){var i=this,l=h.guid();d=k||{};b=j||{};h.each(i.get("dynamicAttrs"),function(m){i.addAttr(m,{value:d[m]},false);delete d[m];});e={lang:i.get("lang"),guid:l};YUI.Env[l]=h.bind(i._connect,i);h.later(0,i,function(){i._init();});},preload:function(l){var i=this,k=i.get("container"),m=h.UA.ie,j=function(n){if((n=i._testFullURL(n))&&(n=n.url)){if(m){(new Image()).src=n;}else{k.append('<object data="'+n+'" width="0" tabindex="-1" height="0" style="display:none;left:-9999px;position:absolute;"></object>');}}};l=(h.Lang.isArray(l)?l:h.Array(arguments,0,true));if(l.length>0){h.each(l,j);}else{h.each(i.get("js"),j);h.each(i.get("css"),j);}return i;},boot:function(){var i=this;i._createSandbox(d);return i;},_connect:function(j){var i=this;i._set("bootstrap",j);j.setAttrs(d);h.each(i.get("dynamicAttrs"),function(l){var k=i.get(l);if(!h.Lang.isUndefined(k)){j.set(l,i.get(l));}i.on(l+"Change",function(m){j.set(m.attrName,m.newVal);});});h.each(i.get("dynamicEvents"),function(k){k=(h.Lang.isObject(k)?k:{name:k});if(k.name){j.on(k.name,h.bind(i._onEvent,i,k));}});if(!h.UA.ie){i.get("container").all("object").remove();}return this._ready();},_init:function(){this._bind();},_bind:function(){},_ready:function(){},_onEvent:function(l,k){var i=this,j=l.rename||l.name;if((l.fn?l.fn.apply(i,[k,j,l]):true)){i.fire(j);}},_buildJS:function(i){return h.Array((i||[]));},_buildCSS:function(i){return h.Array((i||[]));},_buildMeta:function(i){return'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>';},_buildCfg:function(){return e;},_buildBody:function(l){var i=[(l.html?l.html:"<br>")],k=h.JSON||(h.config.win||{}).JSON,j=this._buildCfg(),m=[];if(k){m=k.stringify(h.mix(b,e));}else{m=[];h.each(h.Object.keys(j),function(n){m.push(n+':"'+j[n]+'"');});m="{"+m.join(",")+"}";}i.push("<",c,">YUI_config=",m,";</",c,">");return i;},_createSandbox:function(k){var q=this,l=h.Node.create('<iframe frameborder="0"></iframe>'),i=q.get("container"),j=q.get("css"),n=q.get("js"),p=q._buildMeta(k),m=q._buildBody(k),o;e.t0=new Date().getTime();h.each(j,function(s,r){s=q._testFullURL(s);j[r]=(s&&h.Lang.isObject(s)?'<link rel="stylesheet" type="text/css" href="'+s.url+'"/>':"<style>"+s+"</style>");});h.each(n,function(s,r){s=q._testFullURL(s);n[r]=(s&&h.Lang.isObject(s)?"<"+c+' src="'+s.url+'"></'+c+">":"<"+c+">"+s+"</"+c+">");});l.set("src","javascript"+((h.UA.ie)?":false":":")+";");i.append(l);o=l._node.contentWindow.document;o.open().write('<!doctype html><html dir="'+q.get("dir")+'" lang="'+q.get("lang")+'"><head>'+p+j.join("")+"</head><body>"+m.join("")+n.join("")+"</body></html>");o.close();},_testFullURL:function(i){if(h.Lang.isString(i)){i=(f.test(i)?{url:i}:i);}return(h.Lang.isObject(i)&&!i.url?null:i);}});h.InjectionEngine=g;},"gallery-2011.07.06-19-30",{requires:["node","base-base"]});